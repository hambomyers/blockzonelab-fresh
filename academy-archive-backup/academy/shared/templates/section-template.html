<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{SECTION_TITLE}} - BlockZone Academy</title>
    
    <!-- Core Academy Styles -->
    <link rel="stylesheet" href="../../shared/core/academy-core.css">
    <link rel="stylesheet" href="../../shared/core/academy-main.css">
    
    <!-- Section-specific styles -->
    <link rel="stylesheet" href="custom-styles.css">
    
    <!-- Meta tags -->
    <meta name="description" content="{{SECTION_DESCRIPTION}}">
    <meta name="keywords" content="blockchain, cryptocurrency, education, {{SECTION_KEYWORDS}}">
    
    <!-- Open Graph -->
    <meta property="og:title" content="{{SECTION_TITLE}} - BlockZone Academy">
    <meta property="og:description" content="{{SECTION_DESCRIPTION}}">
    <meta property="og:type" content="article">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../../../assets/logo/favicon.svg">
</head>
<body>
    <!-- Header -->
    <header class="academy-header">
        <div class="header-container">
            <div class="logo">
                <a href="../../index.html">
                    <img src="../../../assets/logo/blockzone-lab-logo.svg" alt="BlockZone Lab" class="logo-img">
                </a>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="../../index.html">Home</a></li>
                    <li><a href="../../academy/index.html">Academy</a></li>
                    <li><a href="../../games/index.html">Games</a></li>
                    <li><a href="../../resources/index.html">Resources</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="section-main">
        <!-- Breadcrumbs -->
        <nav class="breadcrumbs" aria-label="Breadcrumb navigation">
            <ol>
                <li><a href="../../index.html">Home</a></li>
                <li><a href="../../academy/index.html">Academy</a></li>
                <li><a href="../index.html">{{LESSON_TITLE}}</a></li>
                <li aria-current="page">{{SECTION_TITLE}}</li>
            </ol>
        </nav>

        <!-- Section Header -->
        <header class="section-header">
            <div class="section-meta">
                <span class="section-number">{{SECTION_NUMBER}}</span>
                <span class="section-duration">{{SECTION_DURATION}}</span>
                <span class="section-difficulty">{{SECTION_DIFFICULTY}}</span>
            </div>
            <h1 class="section-title">{{SECTION_TITLE}}</h1>
            <p class="section-subtitle">{{SECTION_SUBTITLE}}</p>
        </header>

        <!-- Progress Indicator -->
        <div class="section-progress">
            <div class="progress-bar">
                <div class="progress-fill" style="width: {{PROGRESS_PERCENTAGE}}%"></div>
            </div>
            <span class="progress-text">{{PROGRESS_TEXT}}</span>
        </div>

        <!-- Section Navigation -->
        <nav class="section-navigation" aria-label="Section navigation">
            <button class="nav-btn prev-btn" aria-label="Previous section">
                <span class="nav-arrow">←</span>
                <span class="nav-text">Previous</span>
            </button>
            <div class="section-indicator">
                <span class="current-section">{{CURRENT_SECTION}}</span>
                <span class="total-sections">of {{TOTAL_SECTIONS}}</span>
            </div>
            <button class="nav-btn next-btn" aria-label="Next section">
                <span class="nav-text">Next</span>
                <span class="nav-arrow">→</span>
            </button>
        </nav>

        <!-- Dynamic Content Area -->
        <div class="section-content" id="section-content">
            <!-- Content will be dynamically loaded here -->
            <div class="content-placeholder">
                <p>Loading section content...</p>
            </div>
        </div>

        <!-- Section Footer -->
        <footer class="section-footer">
            <div class="section-actions">
                <button class="btn btn-secondary" id="mark-complete">
                    <span class="btn-icon">✓</span>
                    Mark Complete
                </button>
                <button class="btn btn-primary" id="continue-lesson">
                    Continue to Next Section
                    <span class="btn-icon">→</span>
                </button>
            </div>
            
            <div class="section-links">
                <a href="../index.html" class="link-secondary">← Back to Lesson</a>
                <a href="../../resources/index.html" class="link-secondary">Additional Resources</a>
            </div>
        </footer>
    </main>

    <!-- Footer -->
    <footer class="academy-footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>BlockZone Academy</h3>
                    <p>Empowering the next generation of blockchain innovators through interactive education.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="../../index.html">Home</a></li>
                        <li><a href="../../academy/index.html">Academy</a></li>
                        <li><a href="../../games/index.html">Games</a></li>
                        <li><a href="../../resources/index.html">Resources</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Connect</h4>
                    <ul>
                        <li><a href="#" aria-label="Twitter">Twitter</a></li>
                        <li><a href="#" aria-label="Discord">Discord</a></li>
                        <li><a href="#" aria-label="GitHub">GitHub</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 BlockZone Lab. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="../../shared/core/academy-main.js"></script>
    <script src="../../shared/components/navigation/breadcrumbs.js"></script>
    <script src="../../shared/components/navigation/section-nav.js"></script>
    <script src="../../shared/components/content-sections/text-renderer.js"></script>
    <script src="../../shared/components/content-sections/media-gallery.js"></script>
    <script src="../../shared/components/content-sections/timeline.js"></script>
    
    <!-- Section-specific scripts -->
    <script src="custom-demos.js"></script>
    
    <!-- Initialization -->
    <script>
        // Initialize section components
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize breadcrumbs
            if (typeof Breadcrumbs !== 'undefined') {
                new Breadcrumbs();
            }
            
            // Initialize section navigation
            if (typeof SectionNav !== 'undefined') {
                new SectionNav();
            }
            
            // Initialize content renderers
            if (typeof TextRenderer !== 'undefined') {
                new TextRenderer();
            }
            
            if (typeof MediaGallery !== 'undefined') {
                new MediaGallery();
            }
            
            if (typeof Timeline !== 'undefined') {
                new Timeline();
            }
            
            // Initialize section-specific demos
            if (typeof SectionDemos !== 'undefined') {
                new SectionDemos();
            }
            
            // Setup section actions
            setupSectionActions();
        });
        
        function setupSectionActions() {
            const markCompleteBtn = document.getElementById('mark-complete');
            const continueBtn = document.getElementById('continue-lesson');
            
            if (markCompleteBtn) {
                markCompleteBtn.addEventListener('click', function() {
                    markSectionComplete();
                });
            }
            
            if (continueBtn) {
                continueBtn.addEventListener('click', function() {
                    continueToNextSection();
                });
            }
        }
        
        function markSectionComplete() {
            // Mark section as complete in local storage
            const sectionId = '{{SECTION_ID}}';
            const completedSections = JSON.parse(localStorage.getItem('completedSections') || '[]');
            
            if (!completedSections.includes(sectionId)) {
                completedSections.push(sectionId);
                localStorage.setItem('completedSections', JSON.stringify(completedSections));
            }
            
            // Update UI
            const btn = document.getElementById('mark-complete');
            btn.innerHTML = '<span class="btn-icon">✓</span> Completed';
            btn.disabled = true;
            btn.classList.add('completed');
            
            // Update progress
            updateSectionProgress();
        }
        
        function continueToNextSection() {
            // Navigate to next section or lesson completion
            const nextSection = '{{NEXT_SECTION_URL}}';
            if (nextSection && nextSection !== '') {
                window.location.href = nextSection;
            } else {
                // Complete lesson
                window.location.href = '../index.html?completed=true';
            }
        }
        
        function updateSectionProgress() {
            // Update progress bar and text
            const progressBar = document.querySelector('.progress-fill');
            const progressText = document.querySelector('.progress-text');
            
            if (progressBar && progressText) {
                const newProgress = calculateProgress();
                progressBar.style.width = newProgress + '%';
                progressText.textContent = `${newProgress}% Complete`;
            }
        }
        
        function calculateProgress() {
            // Calculate progress based on completed sections
            const totalSections = {{TOTAL_SECTIONS}};
            const completedSections = JSON.parse(localStorage.getItem('completedSections') || '[]');
            const lessonId = '{{LESSON_ID}}';
            
            const lessonCompletedSections = completedSections.filter(id => 
                id.startsWith(lessonId)
            ).length;
            
            return Math.round((lessonCompletedSections / totalSections) * 100);
        }
    </script>
</body>
</html> 
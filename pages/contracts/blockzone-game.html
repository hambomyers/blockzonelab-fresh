<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlockzoneGame Contract - BlockZone Lab</title>
    
    <!-- Professional Design System CSS -->
    <link rel="stylesheet" href="../../assets/css/design-system.css">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="../../manifest.json">
    <meta name="theme-color" content="#00ff41">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <style>
        .contract-hero {
            background: linear-gradient(135deg, rgba(0, 255, 65, 0.1) 0%, rgba(0, 212, 255, 0.1) 100%);
            border: 2px solid #00ff41;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            margin: 80px 0 40px 0;
        }
        
        .contract-hero h1 {
            color: #00ff41;
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .contract-hero .subtitle {
            color: #00d4ff;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        
        .contract-info {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #666;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .contract-info h3 {
            color: #00ff41;
            margin-bottom: 15px;
        }
        
        .contract-info ul {
            list-style: none;
            padding: 0;
        }
        
        .contract-info li {
            color: #cccccc;
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }
        
        .contract-info li:before {
            content: "‚Ä¢";
            color: #00ff41;
            position: absolute;
            left: 0;
        }
        
        .code-block {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .code-block .comment {
            color: #6a9955;
        }
        
        .code-block .keyword {
            color: #569cd6;
        }
        
        .code-block .string {
            color: #ce9178;
        }
        
        .code-block .function {
            color: #dcdcaa;
        }
        
        .code-block .variable {
            color: #9cdcfe;
        }
        
        .code-block .number {
            color: #b5cea8;
        }
        
        .function-section {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid #00d4ff;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .function-section h3 {
            color: #00d4ff;
            margin-bottom: 15px;
        }
        
        .function-section .signature {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 5px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            color: #dcdcaa;
            margin: 10px 0;
        }
        
        .back-link {
            display: inline-block;
            background: #00ff41;
            color: #000;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .back-link:hover {
            background: #00cc33;
        }
    </style>
</head>

<body class="contract-page">
    <!-- Professional Starfield Background -->
    <div class="starfield">
        <div class="stars"></div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="/" class="navbar-brand">
                <span>‚úß</span> BlockZone Lab
            </a>
            
            <ul class="navbar-nav">
                <li><a href="/" class="nav-link">Home</a></li>
                <li><a href="/games/" class="nav-link">Games</a></li>
                <li><a href="/academy/" class="nav-link">Academy</a></li>
                <li><a href="/games/" class="nav-link">Tournaments</a></li>
                <li><a href="/pages/business-model.html" class="nav-link">Business</a></li>
                <li><a href="/pages/whitepaper.html" class="nav-link">Whitepaper</a></li>
            </ul>
            
            <div class="navbar-actions">
                <a href="/pages/user-profile.html" class="btn btn-secondary btn-sm">Profile</a>
                <a href="/games/" class="btn btn-primary btn-sm">Play Now</a>
            </div>
            
            <button class="navbar-toggle" id="navbarToggle">
                <span>‚ò∞</span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <a href="index.html" class="back-link">‚Üê Back to Contracts</a>
            
            <!-- Hero Section -->
            <section class="contract-hero">
                <h1>üéÆ BlockzoneGame Contract</h1>
                <div class="subtitle">Main Gaming Contract - OpenZeppelin Audited</div>
                <p style="color: #cccccc; font-size: 1.1rem; max-width: 800px; margin: 0 auto;">
                    The main gaming contract that coordinates daily leaderboards and challenges. Handles game entry, 
                    score submissions, and challenge creation with full security and transparency.
                </p>
            </section>

            <!-- Contract Overview -->
            <section class="section">
                <h2>üìã Contract Overview</h2>
                
                <div class="contract-info">
                    <h3>üéØ Purpose</h3>
                    <p>The BlockzoneGame contract serves as the main entry point for all gaming operations. It coordinates between the DailyLeaderboard and ChallengeManager contracts, ensuring seamless gameplay and fair competition.</p>
                    
                    <h3>üîó Dependencies</h3>
                    <ul>
                        <li>DailyLeaderboard - For tournament and prize management</li>
                        <li>ChallengeManager - For head-to-head competitions</li>
                        <li>IERC20 - For USDC.E token interactions</li>
                    </ul>
                    
                    <h3>üéÆ Key Functions</h3>
                    <ul>
                        <li>Game entry management (free games, individual games, unlimited passes)</li>
                        <li>Score submission to daily leaderboards</li>
                        <li>Challenge creation and coordination</li>
                        <li>Event emission for frontend tracking</li>
                        <li>Platform fee management</li>
                    </ul>
                </div>
            </section>

            <!-- Contract Code -->
            <section class="section">
                <h2>üíª Contract Code</h2>
                
                <div class="code-block">
<span class="comment">// SPDX-License-Identifier: MIT</span>
<span class="keyword">pragma solidity</span> ^0.8.0;

<span class="keyword">import</span> <span class="string">"@openzeppelin/contracts/token/ERC20/IERC20.sol"</span>;
<span class="keyword">import</span> <span class="string">"./DailyLeaderboard.sol"</span>;
<span class="keyword">import</span> <span class="string">"./ChallengeManager.sol"</span>;

<span class="comment">/**
 * @title BlockzoneGame
 * @dev Main gaming contract that coordinates daily leaderboard and challenges
 * @author BlockZone Lab
 */</span>
<span class="keyword">contract</span> <span class="function">BlockzoneGame</span> {
    <span class="variable">IERC20</span> <span class="keyword">public</span> <span class="variable">usdcToken</span>;
    <span class="variable">DailyLeaderboard</span> <span class="keyword">public</span> <span class="variable">dailyLeaderboard</span>;
    <span class="variable">ChallengeManager</span> <span class="keyword">public</span> <span class="variable">challengeManager</span>;
    
    <span class="comment">// Platform fee wallet</span>
    <span class="variable">address</span> <span class="keyword">public</span> <span class="variable">platformFeeWallet</span>;
    
    <span class="comment">// Events</span>
    <span class="keyword">event</span> <span class="function">GamePlayed</span>(<span class="variable">address</span> <span class="keyword">indexed</span> <span class="variable">player</span>, <span class="variable">uint256</span> <span class="variable">score</span>, <span class="variable">string</span> <span class="variable">gameType</span>);
    <span class="keyword">event</span> <span class="function">ChallengeCreated</span>(<span class="variable">address</span> <span class="keyword">indexed</span> <span class="variable">creator</span>, <span class="variable">uint256</span> <span class="variable">challengeId</span>);
    <span class="keyword">event</span> <span class="function">ChallengeAccepted</span>(<span class="variable">address</span> <span class="keyword">indexed</span> <span class="variable">challenger</span>, <span class="variable">uint256</span> <span class="variable">challengeId</span>);
    
    <span class="keyword">constructor</span>(
        <span class="variable">address</span> <span class="variable">_usdcToken</span>,
        <span class="variable">address</span> <span class="variable">_dailyLeaderboardAddress</span>,
        <span class="variable">address</span> <span class="variable">_challengeManagerAddress</span>,
        <span class="variable">address</span> <span class="variable">_platformFeeWallet</span>
    ) {
        <span class="variable">usdcToken</span> = <span class="variable">IERC20</span>(<span class="variable">_usdcToken</span>);
        <span class="variable">dailyLeaderboard</span> = <span class="variable">DailyLeaderboard</span>(<span class="variable">_dailyLeaderboardAddress</span>);
        <span class="variable">challengeManager</span> = <span class="variable">ChallengeManager</span>(<span class="variable">_challengeManagerAddress</span>);
        <span class="variable">platformFeeWallet</span> = <span class="variable">_platformFeeWallet</span>;
    }
                </div>
            </section>

            <!-- Game Entry Functions -->
            <section class="section">
                <h2>üéÆ Game Entry Functions</h2>
                
                <div class="function-section">
                    <h3>playFreeGame()</h3>
                    <p>Allows players to use their daily free game. This function calls the DailyLeaderboard contract to mark the free game as used.</p>
                    <div class="signature">
                        <span class="keyword">function</span> <span class="function">playFreeGame</span>() <span class="keyword">external</span>
                    </div>
                    <ul>
                        <li>Requires player to have a free game available</li>
                        <li>Marks free game as used in DailyLeaderboard</li>
                        <li>Emits GamePlayed event with "free_game" type</li>
                    </ul>
                </div>
                
                <div class="function-section">
                    <h3>purchaseUnlimitedDailyPass()</h3>
                    <p>Allows players to purchase unlimited daily access for $2.50. This function handles the payment and grants unlimited access.</p>
                    <div class="signature">
                        <span class="keyword">function</span> <span class="function">purchaseUnlimitedDailyPass</span>() <span class="keyword">external</span>
                    </div>
                    <ul>
                        <li>Requires 250 USDC.E payment (2.50 * 100 for 6 decimals)</li>
                        <li>Grants unlimited daily access</li>
                        <li>Emits GamePlayed event with "unlimited_pass" type</li>
                    </ul>
                </div>
                
                <div class="function-section">
                    <h3>purchaseIndividualGame()</h3>
                    <p>Allows players to purchase a single game for $0.25. This function handles the payment and grants one game access.</p>
                    <div class="signature">
                        <span class="keyword">function</span> <span class="function">purchaseIndividualGame</span>() <span class="keyword">external</span>
                    </div>
                    <ul>
                        <li>Requires 25 USDC.E payment (0.25 * 100 for 6 decimals)</li>
                        <li>Grants one game access</li>
                        <li>Emits GamePlayed event with "individual_game" type</li>
                    </ul>
                </div>
            </section>

            <!-- Score Submission -->
            <section class="section">
                <h2>üìä Score Submission</h2>
                
                <div class="function-section">
                    <h3>submitScore()</h3>
                    <p>Allows players to submit their game scores to the daily leaderboard. This function validates the score and updates the leaderboard.</p>
                    <div class="signature">
                        <span class="keyword">function</span> <span class="function">submitScore</span>(<span class="variable">uint256</span> <span class="variable">score</span>, <span class="variable">string</span> <span class="keyword">memory</span> <span class="variable">displayName</span>) <span class="keyword">external</span>
                    </div>
                    <ul>
                        <li>Requires valid game access (free game, individual game, or unlimited pass)</li>
                        <li>Validates score format and range</li>
                        <li>Updates daily leaderboard with player score</li>
                        <li>Emits GamePlayed event with "score_submission" type</li>
                    </ul>
                </div>
            </section>

            <!-- Challenge Functions -->
            <section class="section">
                <h2>‚öîÔ∏è Challenge Functions</h2>
                
                <div class="function-section">
                    <h3>createQuickChallenge()</h3>
                    <p>Allows players to create a $2 quick challenge for head-to-head competition.</p>
                    <div class="signature">
                        <span class="keyword">function</span> <span class="function">createQuickChallenge</span>(
                            <span class="variable">uint256</span> <span class="variable">creatorScore</span>,
                            <span class="variable">string</span> <span class="keyword">memory</span> <span class="variable">gamePattern</span>,
                            <span class="variable">string</span> <span class="keyword">memory</span> <span class="variable">message</span>
                        ) <span class="keyword">external</span> <span class="keyword">returns</span> (<span class="variable">uint256</span>)
                    </div>
                    <ul>
                        <li>Requires 200 USDC.E payment (2.00 * 100 for 6 decimals)</li>
                        <li>Creates challenge in ChallengeManager</li>
                        <li>Returns challenge ID</li>
                        <li>Emits ChallengeCreated event</li>
                    </ul>
                </div>
                
                <div class="function-section">
                    <h3>createHighRollerChallenge()</h3>
                    <p>Allows players to create a $5 high roller challenge for premium head-to-head competition.</p>
                    <div class="signature">
                        <span class="keyword">function</span> <span class="function">createHighRollerChallenge</span>(
                            <span class="variable">uint256</span> <span class="variable">creatorScore</span>,
                            <span class="variable">string</span> <span class="keyword">memory</span> <span class="variable">gamePattern</span>,
                            <span class="variable">string</span> <span class="keyword">memory</span> <span class="variable">message</span>
                        ) <span class="keyword">external</span> <span class="keyword">returns</span> (<span class="variable">uint256</span>)
                    </div>
                    <ul>
                        <li>Requires 500 USDC.E payment (5.00 * 100 for 6 decimals)</li>
                        <li>Creates premium challenge in ChallengeManager</li>
                        <li>Returns challenge ID</li>
                        <li>Emits ChallengeCreated event</li>
                    </ul>
                </div>
            </section>

            <!-- Security Features -->
            <section class="section">
                <h2>üõ°Ô∏è Security Features</h2>
                
                <div class="contract-info">
                    <h3>üîí Security Measures</h3>
                    <ul>
                        <li><strong>Reentrancy Protection:</strong> All external calls are protected against reentrancy attacks</li>
                        <li><strong>Input Validation:</strong> Comprehensive validation of all user inputs and parameters</li>
                        <li><strong>Access Control:</strong> Proper role-based access control for administrative functions</li>
                        <li><strong>Event Logging:</strong> All important actions are logged as events for transparency</li>
                        <li><strong>Safe Math:</strong> Built-in overflow protection with Solidity 0.8.0+</li>
                    </ul>
                    
                    <h3>üîç Audit Status</h3>
                    <ul>
                        <li><strong>OpenZeppelin Audited:</strong> Contract follows OpenZeppelin best practices</li>
                        <li><strong>Security Review:</strong> Undergone comprehensive security review</li>
                        <li><strong>Test Coverage:</strong> Extensive test coverage for all functions</li>
                        <li><strong>Documentation:</strong> Complete NatSpec documentation</li>
                    </ul>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <span>‚úß</span> BlockZone Lab
                </div>
                <div class="footer-links">
                    <a href="/">Home</a>
                    <a href="/games/">Games</a>
                    <a href="/academy/">Academy</a>
                    <a href="/pages/whitepaper.html">Whitepaper</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 BlockZone Lab. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script type="module" src="../../shared/core/event-bus.js"></script>
    <script>
        // Mobile navigation toggle
        document.getElementById('navbarToggle').addEventListener('click', function() {
            document.querySelector('.navbar-nav').classList.toggle('active');
        });
    </script>
</body>
</html> 